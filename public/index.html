<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Aus Emergency Map</title>
    <meta name="viewport" content="width=device-width" />
    <meta property="og:title" content="Aus Emergency Map" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ausemergencymap.info" />
    <meta property="og:description" content="Fire and emergency information, Australia." />
    <!-- <meta property="og:image" content="" /> -->
    <link rel="stylesheet" href="./leaflet/leaflet.css" />
    <link rel="stylesheet" href="./leaflet.fullscreen/Control.FullScreen.css" />
    <link rel="stylesheet" href="./normalize/normalize.css">
    <link rel="stylesheet" href="./index.css">
  </head>
  <body>
    <div id="page">
      <div id="lmap" class="split"></div>
      <div id="panel" v-bind:class="showPanel ? 'split' : 'full'">
        <div class="toggle">
          <span style="font-size: 10px;" v-on:click.prevent="togglePanel()">MENU</span>
          <button class="button" v-on:click.prevent="togglePanel()" title="toggle menu">&#x21C6;</button>
          <div class="circle bg-alert" title="Data Error" v-if="!dataOk">!</div>
          <div class="circle bg-blue" title="Items">{{ geoFeatures.length }}</div>
          <div class="circle bg-red" title="Resources">{{ totalResources }}</div>
        </div>
        <div class="inner">
          <h1 v-on:click.prevent="debug()">Aus Emergency</h1>
          <h2>Filters</h2>
          <p>
            Max age:
            <input type="number" min="0" max="999" v-model="maxAge" style="width: 3em;">
            hours
          </p>
          <div v-for="(options, filter) in filters" v-bind:key="filter">
            <h3>{{ filter }}</h3>
            <div v-for="opt in Array.from(options).sort()" v-bind:key="filter + opt" v-bind:style="filtersCount[filter][opt] ? '' : 'color: #AAAAAA;'">
              <label v-bind:for="filter + opt" style="display: inline;">
                <input type="checkbox" v-bind:id="filter + opt" v-bind:value="opt" v-model="filtersSelected[filter]">
                {{ opt }}
                <span class="badge bg-blue" v-if="filtersCount[filter][opt]">
                  {{ filtersCount[filter][opt] }}
                </span>
              </label>
            </div>
          </div>
          <br/>
          <h2>List</h2>
          <p>
            <span class="badge bg-blue">{{ geoFeatures.length }}</span>
            Total Items
          </p>
          <p>
            <span class="badge bg-red">{{ totalResources }}</span>
            Total Resources
          </p>
          <p>
            Sort:
            <select v-model="sortBy">
              <option>updated</option>
              <option>created</option>
              <option>resources</option>
              <option>size</option>
            </select>
          </p>
          <div v-for="feature in geoFeatures" v-bind:key="fid(feature)" v-on:click.prevent="selectFeature(feature)" v-bind:class="'listItem ' + (fid(feature) == featureSelected ? 'selected' : '')">
            <a v-bind:name="fid(feature)"></a>
            <h3>{{ feature.properties.sourceTitle }}</h3>
            <p v-html="feature.properties.location"></p>
            <p v-if="feature.properties.resources">
              <span class="badge bg-red">{{ feature.properties.resources }}</span> Resources
            </p>
            <p v-if="feature.properties.sizeFmt">
              {{ feature.properties.sizeFmt }}
            </p>
            <p>
              {{ fdate(feature) }}
            </p>
          </div>
          <p v-if="geoFeatures.length == 0">No items.</p>
          <div>
            <h2>About This Page</h2>
            <p>This page is in no way officially affiliated with Vic Emergency.</p>
            <p><a href="https://github.com/reillybeacom/aus-emergency-map">Fork this on Github.</a></p>
            <p>Proudly built with free, open-source software:</p>
            <ul>
              <li>
                <a href="http://leafletjs.com/">Leaflet</a>
              </li>
              <li>
                <a href="https://www.openstreetmap.org/about">OpenStreetMap</a>
              </li>
              <li>
                <a href="https://vuejs.org/">Vue.js</a>
              </li>
              <li>
                <a href="https://www.mozilla.org/en-US/firefox/">Firefox</a>
              </li>
            </ul>
            <br/>
            <br/>
          </div>
        </div>
      </div>
    </div>
    <script src="./axios/axios.min.js"></script>
    <script src="./leaflet/leaflet.js"></script>
    <script src="./leaflet.fullscreen/Control.FullScreen.js"></script>
    <script src="./vue/vue.min.js"></script>
    <script src="./tokml/tokml.js"></script>
    <script src="./togpx/togpx.js"></script>
    <script src="./index.js"></script>
  </body>
</html>
